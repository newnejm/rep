package managedBeans.gtaparam;

import java.util.ArrayList;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

import models.DescSemaineTypeModel;

import com.yesserp.domain.gtaparam.CodeJour;
import com.yesserp.domain.gtaparam.DescJourneeType;
import com.yesserp.domain.gtaparam.DescSemaineType;
import com.yesserp.domain.gtaparam.JourneeType;
import com.yesserp.domain.gtaparam.JourneeTypeDescSemaineType;
import com.yesserp.domain.gtaparam.Libelle;
import com.yesserp.domain.gtaparam.SemaineType;
import com.yesserp.sessionbean.paramgta.gestionDescSemaineType.GestionDescSemaineTypeLocal;
import com.yesserp.sessionbean.paramgta.gestioncodejour.GestionCodeJourLocal;
import com.yesserp.sessionbean.paramgta.gestionjourneetype.GestionJourneeTypeLocal;
import com.yesserp.sessionbean.paramgta.gestionlibelle.GestionLibelleLocal;
import com.yesserp.sessionbean.paramgta.gestionsemainetype.GestionSemaineTypeLocal;

@ManagedBean
@ViewScoped
public class SemaineTypeBean {

	// attribut added by omar le 28/08
	private List<SemaineType> lsemaine;
	private SemaineType selectedsemaine;
	// fin add
	private List<JourneeType> journeeTypes = new ArrayList<>();
	private List<JourneeType> listjournee = new ArrayList<>();
	private SemaineType semaineType = new SemaineType();
	private List<CodeJour> codeJours = new ArrayList<>();
	private CodeJour codeJour = new CodeJour();
	private JourneeType journeeType = new JourneeType();
	private Libelle libelle = new Libelle();
	private boolean headerButtonsDisabled = true;
	private int id = 1;
	private List<DescSemaineTypeModel> descSemaineTypeList;
	private DescSemaineTypeModel selectedDescSemaineType;
	private List<JourneeTypeDescSemaineType> journeeTypeDescSemaineTypeList;
	@EJB
	GestionJourneeTypeLocal gestionJourneeTypeLocal;
	@EJB
	GestionSemaineTypeLocal gestionSemaineTypeLocal;
	@EJB
	GestionLibelleLocal gestionLibelleLocal;
	@EJB
	GestionCodeJourLocal gestionCodeJourLocal;
	@EJB
	GestionDescSemaineTypeLocal gestionDescSemaineType;

	// add by omar le 28/08

	public String select() {
		return null;
	}

	public String supprimer() {
		gestionSemaineTypeLocal.supprimerSemaineType(this.selectedsemaine);
		return redirect();
	}

	public String edit() {
		return null;
	}

	public String save() {
		return null;
	}

	// fin add

	@PostConstruct
	public void intit() {
		// add by omar le 29/08
		this.lsemaine = gestionSemaineTypeLocal.listeSemaineType();
		// fin add
		journeeTypes = gestionJourneeTypeLocal.listerJourneeType();
		codeJours = gestionCodeJourLocal.listeCodeJours();
		codeJour = gestionCodeJourLocal.findCodeJourById(2);
		initDescSemaineType();
	}

	public void ajouter() {
		gestionSemaineTypeLocal.ajouterSemaineType(semaineType);
		gestionLibelleLocal.ajoutLibelle(libelle);
		libelle.setSemaineType(semaineType);
		gestionLibelleLocal.modifierLibelle(libelle);
		

		for (JourneeType j : listjournee) {
			if (id < 8) {
				gestionSemaineTypeLocal
						.ajouterDesJourneesPourSemaineAvecCodeJour(semaineType,
								j, gestionCodeJourLocal.findCodeJourById(id++));
			}
		}
		semaineType.setLibelles(new ArrayList<Libelle>());
		semaineType.getLibelles().add(libelle);
		lsemaine.add(semaineType);
		libelle = new Libelle();
		semaineType = new SemaineType();

		listjournee = new ArrayList<>();
		id = 1;

	}

	public String redirect() {

		return "/gtaparam2/Gestionsemainetype.jsf?faces-redirect=true";
	}

	public void test() {
		if (journeeType.getCodejt() != null) {
			listjournee.add(journeeType);
		}

	}

	public void afficher() {
		for (JourneeType j : listjournee) {
			System.out.println("*********" + j.getCodejt());
		}

	}

	/************************************ Desc Semaine Type *********************************/
	public void initDescSemaineType() {
		if (descSemaineTypeList == null) {
			descSemaineTypeList = new ArrayList<DescSemaineTypeModel>();
		}
		// Alimentation de la liste de descSemaineType à partir de la base de
		// données
		List<DescSemaineType> descSemaineTypes = gestionDescSemaineType
				.getDescSemaineTypesBySemaineType(selectedsemaine);
		if (descSemaineTypes != null && !descSemaineTypes.isEmpty()) {
			for (DescSemaineType descSemaineType : descSemaineTypes) {
				descSemaineTypeList.add(new DescSemaineTypeModel());
				DescSemaineTypeModel descSemaineTypeModel = descSemaineTypeList
						.get(descSemaineTypeList.size() - 1);
				descSemaineTypeModel.setDescSemaineType(descSemaineType);
			}
		}
	}

	public void addDescSemaineType() {
		if (descSemaineTypeList != null) {
			descSemaineTypeList.add(new DescSemaineTypeModel());
			DescSemaineTypeModel descSemaineTypeModel = descSemaineTypeList
					.get(descSemaineTypeList.size() - 1);
			/*for (Integer i = 0; i < 6; i++) {
				descSemaineTypeModel.getDescSemaineType()
						.getJourneeTypeDescSemaineTypes()
						.add(new JourneeTypeDescSemaineType());
				JourneeTypeDescSemaineType journeeTypeDescSemaineType = descSemaineTypeModel
						.getDescSemaineType()
						.getJourneeTypeDescSemaineTypes()
						.get(descSemaineTypeModel.getDescSemaineType()
								.getJourneeTypeDescSemaineTypes().size() - 1);
				journeeTypeDescSemaineType.setIndexJour(i);
				switch (i) {
				case 0:
					journeeTypeDescSemaineType.setJour("Lundi");
					break;
				case 1:
					journeeTypeDescSemaineType.setJour("Mardi");
					break;
				case 2:
					journeeTypeDescSemaineType.setJour("Mercredi");
					break;
				case 3:
					journeeTypeDescSemaineType.setJour("Jeudi");
					break;
				case 4:
					journeeTypeDescSemaineType.setJour("Vendredi");
					break;
				case 5:
					journeeTypeDescSemaineType.setJour("Samedi");
					break;
				case 6:
					journeeTypeDescSemaineType.setJour("Dimanche");
					break;

				default:
					journeeTypeDescSemaineType.setJour("jour");
					break;
				}
				journeeTypeDescSemaineTypeList = descSemaineTypeModel
						.getDescSemaineType().getJourneeTypeDescSemaineTypes();
			}*/
		}
	}

	public void onDescSemaineTypeRowSelect() {

	}

	/****************************************************************************************/

	public List<JourneeType> getJourneeTypes() {
		return journeeTypes;
	}

	public void setJourneeTypes(List<JourneeType> journeeTypes) {
		this.journeeTypes = journeeTypes;
	}

	public SemaineType getSemaineType() {
		return semaineType;
	}

	public void setSemaineType(SemaineType semaineType) {
		this.semaineType = semaineType;
	}

	public Libelle getLibelle() {
		return libelle;
	}

	public void setLibelle(Libelle libelle) {
		this.libelle = libelle;
	}

	public List<JourneeType> getListjournee() {
		return listjournee;
	}

	public void setListjournee(List<JourneeType> listjournee) {
		this.listjournee = listjournee;
	}

	public List<CodeJour> getCodeJours() {
		return codeJours;
	}

	public void setCodeJours(List<CodeJour> codeJours) {
		this.codeJours = codeJours;
	}

	public JourneeType getJourneeType() {
		return journeeType;
	}

	public void setJourneeType(JourneeType journeeType) {
		this.journeeType = journeeType;
	}

	public CodeJour getCodeJour() {
		return codeJour;
	}

	public void setCodeJour(CodeJour codeJour) {
		this.codeJour = codeJour;
	}

	public List<SemaineType> getLsemaine() {
		return lsemaine;
	}

	public void setLsemaine(List<SemaineType> lsemaine) {
		this.lsemaine = lsemaine;
	}

	public SemaineType getSelectedsemaine() {
		return selectedsemaine;
	}

	public void setSelectedsemaine(SemaineType selectedsemaine) {
		this.selectedsemaine = selectedsemaine;
	}

	public boolean isHeaderButtonsDisabled() {

		return headerButtonsDisabled;
	}

	public void onRowSelectDataTable() {
		this.setHeaderButtonsDisabled(false);
	}

	public void setHeaderButtonsDisabled(boolean headerButtonsDisabled) {
		this.headerButtonsDisabled = headerButtonsDisabled;
	}

	public List<DescSemaineTypeModel> getDescSemaineTypeList() {
		return descSemaineTypeList;
	}

	public void setDescSemaineTypeList(
			List<DescSemaineTypeModel> descSemaineTypeList) {
		this.descSemaineTypeList = descSemaineTypeList;
	}

	public DescSemaineTypeModel getSelectedDescSemaineType() {
		return selectedDescSemaineType;
	}

	public void setSelectedDescSemaineType(
			DescSemaineTypeModel selectedDescSemaineType) {
		this.selectedDescSemaineType = selectedDescSemaineType;
	}

	public List<JourneeTypeDescSemaineType> getJourneeTypeDescSemaineTypeList() {
		return journeeTypeDescSemaineTypeList;
	}

	public void setJourneeTypeDescSemaineTypeList(
			List<JourneeTypeDescSemaineType> journeeTypeDescSemaineTypeList) {
		this.journeeTypeDescSemaineTypeList = journeeTypeDescSemaineTypeList;
	}

}
