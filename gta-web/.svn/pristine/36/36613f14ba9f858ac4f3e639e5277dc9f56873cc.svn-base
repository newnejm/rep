<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<ui:composition template="/template/MainContent.xhtml">
	<ui:define name="Content">
<div class="col-lg-8">
<div>
		<h:form id="form1">


			<p:messages id="messages" showDetail="true" autoUpdate="true"
				closable="true" />

			<h:panelGrid columns="5" style="margin-right: 200px;">
				<p:outputLabel value="Filtre" />
				<p:calendar placeholder="De"
					value="#{activiteCalculerBean.dateDebutFiltre}" />
				<p:calendar placeholder="À"
					value="#{activiteCalculerBean.dateFinFiltre}" />
				<p:commandButton value="Filtrer"
					action="#{activiteCalculerBean.filtreDate()}" update=":form1" />
				<p:commandButton value="Calculer" onclick="PF('datecalc').show();"
					type="button" update=":calcule" />
			</h:panelGrid>


</h:form>







</div>


			
		


			<!-- ////////////////////////////////////////////////////////////////////////////////////////////////  -->


<!-- WIDGET TABBED CONTENT -->

			
<br></br>
			<div>
				<div class="widget">
					<div class="widget-header">
						
						<h3>
							<span>Planning Calculé</span>
						</h3>
					</div>
					<div class="widget-content">
						<div class="tab-content no-padding">
							<div class="tab-pane fade in active" id="tab1.1">
							
							
							<pe:timeline id="timeline2" value="#{activiteCalculerBean.model}"  
             editable="true" eventMargin="10" eventMarginAxis="0"  
             locale="#{activiteCalculerBean.locale}"  
             start="#{activiteCalculerBean.start}"  
             end="#{activiteCalculerBean.end}"  
             showNavigation="true" showButtonNew="true"  
             axisOnTop="true" stackEvents="false" themable="false"/>  
              			
							</div>
							
						</div>
					</div>
				</div>
				<!-- END WIDGET TABBED CONTENT -->
			</div>
			
			
			
			<div >
				<div class="widget">
					<div class="widget-header">

						
					<h3><span>Activités  Calculées</span></h3>

					</div>
					<div class="widget-content">
						<div class="tab-content no-padding">
							<div class="tab-pane fade in active" id="tab1.2">
							
							
							<pe:timeline id="timeline3" value="#{activiteCalculerBean.model2}"  
             editable="true" eventMargin="10" eventMarginAxis="0"  
             locale="#{activiteCalculerBean.locale}"  
             start="#{activiteCalculerBean.start}"  
             end="#{activiteCalculerBean.end}"  
             showNavigation="true" showButtonNew="true"  
             axisOnTop="true" stackEvents="false" themable="false"/>  
              			
							</div>
							
						</div>
					</div>
				</div>
				<!-- END WIDGET TABBED CONTENT -->
			</div>



<div >

<div class="widget widget-table">
					<div class="widget-header">
						<h3>
							Compteur
						</h3>
					</div>
					<div class="widget-content">
<p:schedule id="schedule"  widgetVar="myschedule" timeZone="GMT+1">

        </p:schedule>
        </div>

</div>
</div>


		








		<!-- ////////////// employee       -->
		






		<!-- 		///////////////////////////////////////////////////////       -->

		<p:dialog header="Intervalle calcule" widgetVar="datecalc"
			height="200" modal="true" id="popup1">
			<h:form id="calcule">
				<h:panelGrid columns="2">
					<p:outputLabel value="Date début de calcule" />
					<p:calendar value="#{activiteCalculerBean.dateDebutCalcule}" />
					<p:outputLabel value="Date Fin de calcule" />
					<p:calendar value="#{activiteCalculerBean.dateFinCalcule}" />
					<p:outputLabel value="Seulement les plages obligatoires" />
					<p:selectBooleanCheckbox
						value="#{activiteCalculerBean.horairesObligatoire}" />
					<p:outputLabel value="Forcer les horaires de références" />
					<p:selectBooleanCheckbox
						value="#{activiteCalculerBean.horairesRef}" />
					<p:commandButton value="Calculer"
						action="#{activiteCalculerBean.calculeActiviteReel()}"
						update=":form1" onclick="PF('datecalc').hide();"
						actionListener="#{activiteCalculerBean.info()}" />
				</h:panelGrid>
			</h:form>
		</p:dialog>


		<!-- 						/////////////////////////////////////////////////://///////////////////////////////////////////////////////   -->
		<p:dialog header="Détails Activite Saisie" widgetVar="dialogViewSc"
			resizable="false" width="350">
			<h:form id="formDialogViewSc">
				<h:panelGrid columns="2">


					<p:outputLabel value="Date" />
					<p:inputText
						value="#{activiteCalculerBean.activiteReelSaisie.date}" />



					<p:outputLabel value="Motif" />
					<p:inputText
						value="#{activiteCalculerBean.activiteReelSaisie.activitePresence.codeap}" />


					<p:outputLabel value="Heure debut" />
					<p:inputText
						value="#{activiteCalculerBean.activiteReelSaisie.heuredeb}" />

					<p:outputLabel value="Heure fin" />
					<p:inputText
						value="#{activiteCalculerBean.activiteReelSaisie.heurefin}" />


					<p:outputLabel value="Durée" />
					<p:inputText
						value="#{activiteCalculerBean.getDuree(activiteCalculerBean.activiteReelSaisie.heurefin,activiteCalculerBean.activiteReelSaisie.heuredeb)}" />


					<p:outputLabel value="Poids" />
					<p:inputText
						value="#{activiteCalculerBean.activiteReelSaisie.activitePresence.poids}" />



				</h:panelGrid>

			</h:form>
		</p:dialog>





		<p:dialog header="Modifier Activite Saisie" widgetVar="dialogEditSc"
			resizable="false" width="350">
			<h:form id="formDialogEditSc">
				<h:panelGrid>

					<p:outputLabel value="Date" />
					<p:inputText
						value="#{activiteCalculerBean.activiteReelSaisie.date}" />


					<p:outputLabel value="Motif" />
					<p:inputText
						value="#{activiteCalculerBean.activiteReelSaisie.activitePresence.codeap}" />


					<p:outputLabel value="Heure debut" />
					<p:inputText
						value="#{activiteCalculerBean.activiteReelSaisie.heuredeb}" />

					<p:outputLabel value="Heure fin" />
					<p:inputText
						value="#{activiteCalculerBean.activiteReelSaisie.heurefin}" />


					<p:outputLabel value="Durée" />
					<p:inputText
						value="#{activiteCalculerBean.getDuree(activiteCalculerBean.activiteReelSaisie.heurefin,activiteCalculerBean.activiteReelSaisie.heuredeb)}" />


					<p:outputLabel value="Poids" />
					<p:inputText
						value="#{activiteCalculerBean.activiteReelSaisie.activitePresence.poids}" />


				</h:panelGrid>
				<p:commandButton value="Sauvegarder" ajax="true"
					action="#{activiteCalculerBean.modifierActiviteSaisie()}"
					oncomplete="PF('dialogEditSc').hide()"></p:commandButton>
			</h:form>
		</p:dialog>


</div>
<div class="col-lg-4">
<div>
<h:form id="form2">
				<div class="widget widget-table">
					<div class="widget-header">
						<h3>
							<i class="fa fa-users"></i>Liste des collaborteurs
						</h3>
					</div>
					<div class="widget-content">

						<div class="input-group input-group-sm">
							<h:form id="formSearch">
								<h:outputLabel value="Matricule:" />
								<p:inputText value="#{activiteCalculerBean.matricul}"
									onkeypress="if (event.keyCode == 13) {onchange(); return false; }">
									<p:ajax event="change"
										listener="#{activiteCalculerBean.chargerCollaborateurs()}"
										update=":form2:eventsDT" />
								</p:inputText>

							</h:form>
						</div>
						<br />




						<p:dataTable id="eventsDT" var="identite" 
							value="#{activiteCalculerBean.identites}" selectionMode="single"
							selection="#{activiteCalculerBean.selectedIdentite}"
							rowKey="#{identite.numedoss}">

							<f:facet name="header"> List of Employers </f:facet>
							<p:ajax event="rowSelect"
								listener="#{activiteCalculerBean.onRowSelect}" update=":form1" />



							<p:column headerText="Matricule">
								<h:outputText value="#{identite.matricul}" />
							</p:column>
							<p:column headerText="Nom et Prénom">
								<h:outputText value="#{identite.nom} #{identite.prenom}" />
							</p:column>
						</p:dataTable>
					</div>

				</div>
			</h:form>
			</div>


</div>
		




		



		<!-- 			//////////////////////////////////////////////////////////////////////////////////////////////////////////  -->



	</ui:define>
</ui:composition>
</html>
